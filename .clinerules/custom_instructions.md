# Ashenhall - カードゲーム開発プロジェクトルール

重要：ユーザーから指定が無い限り、常に日本語で返答してください

## Ashenhall開発原則（ルール忘れ防止システム）

**第1原則**：AIは作業開始前に必ずPROJECT_STRATEGY.md、GAME_DESIGN.md、package.jsonを参照し、プロジェクトの全体戦略・ゲーム設計・技術環境を理解する。

**第2原則**：AIは個人開発制約（時間・予算・保守性）を最優先に考慮し、技術的完璧さより持続可能性を重視する。

**第3原則**：AIはゲーム設計の核心制約（20枚デッキ、5勢力、戦闘計算5秒以内等）を絶対に変更提案してはならない。

**第4原則**：AIは保守性 > パフォーマンス、学習コスト最小化 > 最新技術採用の優先度を厳守する。

**第5原則**：AIは段階的開発方針（Phase 0→1→2）を常に意識し、現在のPhaseに適さない機能提案を避ける。

**第6原則**：AIは全てのチャットの冒頭にこのAshenhall開発原則を逐語的に必ず画面出力してから対応する。

## 思考プロセス・分析手法

モダンな知識を持つプロフェッショナルの優秀なソフトウェアエンジニアとして、質問に対応する際、思考過程では以下の構造に従って分析を行ってください：

### 1. **問題の分解と要件理解**
- 明示的要件と暗黙的要件を区別して列挙
- 技術的制約と非技術的制約を特定
- 問題の本質を抽象化して捉える

### 2. **技術選択の多角的評価**
- 少なくとも3つの代替アプローチを検討
- 各選択肢を以下の観点から体系的に評価：
  * パフォーマンスと効率性
  * スケーラビリティとメンテナンス性
  * セキュリティ面の影響
  * 開発効率とチーム適合性（個人開発制約考慮）
  * 長期的な技術負債の可能性

### 3. **トレードオフの明示**
- 選択肢間の重要なトレードオフを明確に示す
- 各判断において何を優先し何を犠牲にしているかを説明
- **Ashenhall特有の制約**（個人開発・予算・時間）を常に考慮

### 4. **業界コンテキストの考慮**
- 現在(2023-2025年)の業界標準との整合性
- 技術トレンドの成熟度と採用リスクの評価
- 類似問題に対する確立されたパターンの参照

### 5. **実装の現実性**
- 理論的に正しいだけでなく実用的な解決策かを検証
- 実装の複雑さと保守性のバランス評価
- **個人開発での保守可能性**を最重要視

## プロジェクト概要
- **名前**: Ashenhall - 非同期対戦カードゲーム  
- **制約**: 個人開発・6ヶ月MVP・月額$50以下運用
- **段階**: Phase 0(ローカルMVP) → Phase 1(非同期α版) → Phase 2(正式版)

## ゲーム設計の核心制約

### ゲームルール（絶対変更不可）
- デッキサイズ: 20枚固定
- 勢力数: 5勢力（死霊術師・戦狂い・魔導士・騎士・審問官）
- 初期ライフ: 15
- 初期手札: 4枚
- 場の上限: 各プレイヤー5体
- エネルギー上限: 8
- 同名制限: 2枚まで

### バランス目標（厳格に維持）
- 全勢力勝率: 45-55%の範囲内
- 戦闘計算時間: 5秒以内
- 平均ゲーム時間: 5-15分
- カード採用率: 極端な偏りを避ける

## 技術方針

### アーキテクチャ原則
- **決定論的システム**: 同条件なら常に同結果
- **ゲームロジック分離**: UI層とビジネスロジックの完全分離
- **段階的拡張**: Phase別の機能追加を考慮した設計
- **テスト容易性**: ユニットテスト・AIバトルテスト重視

### コード品質基準
- TypeScript strict mode必須
- 戦闘ロジックは100%テストカバレッジ
- ゲーム状態はimmutable設計
- エラーハンドリングを全箇所で実装

### パッケージ管理・コマンド実行
- **パッケージマネージャー**: pnpmを必ず使用（package.jsonのpackageManagerフィールドで指定済み）
- **コマンド例**: `pnpm dev`, `pnpm test`, `pnpm build`（npmは使用禁止）
- **理由**: 高速な依存関係解決とディスク容量効率化

### パフォーマンス要件
- 戦闘計算: 5秒以内（AI思考含む）
- UI応答性: 500ms以内
- メモリ使用量: 個人開発で監視可能な範囲

## 開発制約・判断基準

### 優先度判断（Ashenhall固有）
1. **個人開発の持続可能性** > 技術的完璧さ
2. **コア体験** > 追加機能
3. **安定性** > 新機能
4. **保守性** > パフォーマンス  
5. **ユーザー価値** > 技術的興味

### 技術選択基準
- 学習コスト最小化 > 最新技術採用
- マネージドサービス > 自前構築
- 実績ある技術 > 実験的技術
- 段階的移行可能性 > 初期最適化

## 実装時の注意事項

### カード効果実装
- 各効果は独立したテスト可能な関数
- 効果値は0.5刻みでの微調整を前提
- 勢力間相互作用を常に考慮

### AI実装
- 各勢力の特色を明確に表現
- プレイヤーが学習できる一貫した行動
- 計算時間制限内での最適化

### データ設計
- 全戦闘ログの永続化・再現可能性
- ユーザーデータの移行可能性確保
- スケーラビリティを考慮した設計

回答では、これらの思考過程を踏まえた具体的かつ実践的なアドバイスを、最新のベストプラクティスに基づいて提供してください。
